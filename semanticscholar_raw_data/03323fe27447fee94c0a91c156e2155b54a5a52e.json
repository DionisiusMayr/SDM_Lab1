{"paperId": "03323fe27447fee94c0a91c156e2155b54a5a52e", "publicationVenue": null, "title": "Cost Models for Big Data Query Processing: Learning, Retrofitting, and Our Findings", "abstract": "Query processing over big data is ubiquitous in modern clouds, where the system takes care of picking both the physical query execution plans and the resources needed to run those plans, using a cost-based query optimizer. A good cost model, therefore, is akin to better resource efficiency and lower operational costs. Unfortunately, the production workloads at Microsoft show that costs are very complex to model for big data systems. In this work, we investigate two key questions: (i) can we learn accurate cost models for big data systems, and (ii) can we integrate the learned models within the query optimizer. To answer these, we make three core contributions. First, we exploit workload patterns to learn a large number of individual cost models and combine them to achieve high accuracy and coverage over a long period. Second, we propose extensions to Cascades framework to pick optimal resources, i.e, number of containers, during query planning. And third, we integrate the learned cost models within the Cascade-style query optimizer of SCOPE at Microsoft. We evaluate the resulting system, Cleo, in a production environment using both production and TPC-H workloads. Our results show that the learned cost models are 2 to 3 orders of magnitude more accurate, and 20X more correlated with the actual runtimes, with a large majority (70%) of the plan changes leading to substantial improvements in latency as well as resource usage.", "venue": "SIGMOD Conference", "year": 2020, "fieldsOfStudy": ["Computer Science"], "publicationTypes": ["JournalArticle", "Book", "Conference"], "publicationDate": "2020-02-27", "journal": {"name": "Proceedings of the 2020 ACM SIGMOD International Conference on Management of Data"}, "authors": [{"authorId": "5295950", "name": "Tarique Siddiqui"}, {"authorId": "2153832", "name": "Alekh Jindal"}, {"authorId": "49830907", "name": "S. Qiao"}, {"authorId": "1471618633", "name": "Hiren Patel"}, {"authorId": "2065014", "name": "Wangchao Le"}], "citations": [{"paperId": "7f9c5100c7ce53280e109ce1b331a60cddd8328b", "title": "COSTREAM: Learned Cost Models for Operator Placement in Edge-Cloud Environments"}, {"paperId": "49a5aadfceac5d5ed9e224bc777f4f616de1daae", "title": "Modeling Shifting Workloads for Learned Database Systems"}, {"paperId": "3ac78990ece16ac5cfe1a4553af9a855a8019e43", "title": "Roq: Robust Query Optimization Based on a Risk-aware Learned Cost Model"}, {"paperId": "756430d0c98735873f66ef887c441f5475afecbf", "title": "LearnedWMP: Workload Memory Prediction Using Distribution of Query Templates"}, {"paperId": "cfd55aeec363d9e0c29b127aa8c0fc8bfbb24085", "title": "Sibyl: Forecasting Time-Evolving Query Workloads"}, {"paperId": "9a2b8455660a694558b8a7124d4a14c75cb2bd0e", "title": "Cross-Feature Transfer Learning for Efficient Tensor Program Generation"}, {"paperId": "32ba448e90bca6c22c8b90082869d89b7417767b", "title": "Optimizing Dataflow Systems for Scalable Interactive Visualization"}, {"paperId": "8e0175e00163e80aea89daf12474cbe68643fb99", "title": "Rethinking Learned Cost Models: Why Start from Scratch?"}, {"paperId": "cb05ef87cf3c8616626e3648f6a4146199acf57f", "title": "Machine Unlearning in Learned Databases: An Experimental Analysis"}, {"paperId": "2173448e26d8bec6edd4e2456b39944f0109868b", "title": "Cost-Intelligent Data Analytics in the Cloud"}, {"paperId": "95b949527025bf4c9ffe41947ac3ed43a2d3b2aa", "title": "Anser: Adaptive Information Sharing Framework of AnalyticDB"}, {"paperId": "5ce4333f04c8d823278b5abfb37d122a47c445a6", "title": "A model-based DevOps process for development of mathematical database cost models"}, {"paperId": "393a32eb41b061159d0ab837028ab8143491c3b3", "title": "Magpie: Efficient Big Data Query System Parameter Optimization based on Pre-selection and Search Pruning Approach"}, {"paperId": "ac08fa76038762f89a0f6c39ea38655422926408", "title": "Towards Building Autonomous Data Services on Azure"}, {"paperId": "f9bb72f8c2d92452ac98b8b715dedcc5926396f0", "title": "LEON: A New Framework for ML-Aided Query Optimization"}, {"paperId": "4a3881fa3ed9cc2718af10951ced44ef20255ece", "title": "Explainable AI for DBA: Bridging the DBA's experience and machine learning in tuning database systems"}, {"paperId": "89e3bf426538c0d5eda16e455e4663e931e3a943", "title": "Transfer Learning Across Heterogeneous Features For Efficient Tensor Program Generation"}, {"paperId": "ffbcb2112645d3c82eb0027de0c2c6caac991810", "title": "ML-Powered Index Tuning: An Overview of Recent Progress and Open Challenges"}, {"paperId": "344fcf9c139da6c21fa9516a1f57b586507a0d53", "title": "Query Optimizer as a Service"}, {"paperId": "e12a970a0069ae11b99616694cfb715a01c29f6e", "title": "Detect, Distill and Update: Learned DB Systems Facing Out of Distribution Data"}, {"paperId": "255cee23c67b5ff254761513f67fab1946d3c423", "title": "COMORP: Rapid prototyping for mathematical database cost models development"}, {"paperId": "250da3415c59d66e8b3933537189deed6a485de2", "title": "Multi-objective query optimization in Spark SQL"}, {"paperId": "96cd0d31b6188cae63cab75cbdc67141f158b11e", "title": "Fine-Grained Modeling and Optimization for Intelligent Resource Management in Big Data Processing"}, {"paperId": "e9b0f9456717fb3985ce2c6b7dc15316d2e742e1", "title": "Tiresias: Enabling Predictive Autonomous Storage and Indexing"}, {"paperId": "8e2aefa5baeb2a250f15920976a94721bff004d5", "title": "Deploying a Steered Query Optimizer in Production at Microsoft"}, {"paperId": "dd94ea9edb279ce7275ec1297024d7aaa22fe158", "title": "ISUM: Efficiently Compressing Large and Complex Workloads for Scalable Index Tuning"}, {"paperId": "cf8605f0c39688ad58a91c055527b6af988d7b10", "title": "DISTILL: Low-Overhead Data-Driven Techniques for Filtering and Costing Indexes for Scalable Index Tuning"}, {"paperId": "354fbd6c940ead125fe995503b87462470d2d4f5", "title": "Database Optimizers in the Era of Learning"}, {"paperId": "ea38182f7626bb75b12a1f35b97664c8a3298209", "title": "A Resource-Aware Deep Cost Model for Big Data Query Processing"}, {"paperId": "88a9bcb4cf139533e6002160707ef7c1f0148923", "title": "QueryFormer: A Tree Transformer Model for Query Plan Representation"}, {"paperId": "69ad3fb58b3d422b50583f7791554d4fe7720b88", "title": "Zero-Shot Cost Models for Out-of-the-box Learned Cost Prediction"}, {"paperId": "9471c0f199f15bc1711ea9654a011bb44cf7b764", "title": "Baihe: SysML Framework for AI-driven Databases"}, {"paperId": "5884eae591633a1ac6e3a1aa96d32c6dd3595def", "title": "DeepCM: Deep neural networks to improve accuracy prediction of database cost models"}, {"paperId": "689f70ea07215b58e39dfc624480b2b8e8c5848a", "title": "PerfGuard: Deploying ML-for-Systems without Performance Regressions, Almost!"}, {"paperId": "f68f33eafa34d1406f464caf573c0d30c3bb76b3", "title": "Optimal Resource Allocation for Serverless Queries"}, {"paperId": "70f35dff1aca951762f0c7da081d1ce3a39f1592", "title": "CPRQ: Cost Prediction for Range Queries in Moving Object Databases"}, {"paperId": "72e11b7b04c1a5df1b660b143c626355ad27de0f", "title": "Phoebe: A Learning-based Checkpoint Optimizer"}, {"paperId": "03fe5309d8ea349ed1aba77ba1e66ba5900856b8", "title": "The Cosmos Big Data Platform at Microsoft: Over a Decade of Progress and a Decade to Look Forward"}, {"paperId": "b362eae4b08e36a01e03ab2b7a51870ebf6d3a97", "title": "Machine Learning for Cloud Data Systems: the Promise, the Progress, and the Path Forward"}, {"paperId": "15a1e0ec53c9b710bbb4252bdd454b870a35b5e1", "title": "SparkCruise: Workload Optimization in Managed Spark Clusters at Microsoft"}, {"paperId": "01e858656aa3ef8d6b8463042298d86473236985", "title": "Steering Query Optimizers: A Practical Take on Big Data Workloads"}, {"paperId": "50d5d4c5f22d8eeb3ea7d4fc1fe6fa039c79a29e", "title": "A Unified Transferable Model for ML-Enhanced DBMS"}, {"paperId": "8d0dd632c9da4740df4aa729821109169fd82805", "title": "Microlearner: A fine-grained Learning Optimizer for Big Data Workloads at Microsoft"}, {"paperId": "1586c70a2e39d67f2ac5928647c241809881376b", "title": "Spark-based Cloud Data Analytics using Multi-Objective Optimization"}, {"paperId": "8497ac9160bc1ef8f00429fcf40bdd9efb76b7e6", "title": "Modified Firefly Algorithm for Optimizing Biomedical Breast Cancer Queries"}, {"paperId": "5019dfffaa035c7a3565a9f691a9acc62207a95b", "title": "A Survey on Advancing the DBMS Query Optimizer: Cardinality Estimation, Cost Model, and Plan Enumeration"}, {"paperId": "4daecbf5af5dc2511abc31eecbfc2d8adb54db10", "title": "AutoToken"}, {"paperId": "e9bb419606a0030e450476da0905560a24a69014", "title": "MLOS: An Infrastructure for Automated Software Performance Engineering"}, {"paperId": "d202c0d367d9b574b2d6dd919c77eb3a3cefdc51", "title": "SIGMOD officers, committees, and awardees"}, {"paperId": "a397840de4303ca3346466632466892a6a69829a", "title": "PilotScope: Steering Databases with Machine Learning Drivers"}, {"paperId": "a538810087c7d8b240bf512ae997144fcbea466f", "title": "Towards Optimal Resource Allocation for Big Data Analytics"}, {"paperId": "198d20aa464124dba673da6dc2b10548290233f0", "title": "Learned Query Optimizer: At the Forefront of AI-Driven Databases"}, {"paperId": "2d77eb067dea7ebd25685e8e53a29df1f7cc68e8", "title": "Phoebe: A Learning-based Checkpoint Optimizer"}, {"paperId": "9016a18f85ef764aca7f63b023460a24d01f227d", "title": "Magpie: Python at Speed and Scale using Cloud Backends"}, {"paperId": "7396b87c86f9a6f1edf25f8753f787e9578d0afb", "title": "Production Experiences from Computation Reuse at Microsoft"}, {"paperId": "aa68fb3444d596fe4dc6aa812668671cb4aa11d8", "title": "BodyData : a modular system for the design and implementation of complex multistep experiments"}, {"paperId": "af5958f026701156099245f41694acee0e599d20", "title": "TenSet: A Large-scale Program Performance Dataset for Learned Tensor Compilers"}, {"paperId": "a52df0b58a4c31589f9cabbcbfd7da35b39f2720", "title": "Using MDE for Teaching Database Query Optimizer"}, {"paperId": "1a8ad8146253a2f0e476566ebf0c494a337e8dea", "title": "Towards Plan-aware Resource Allocation in Serverless Query Processing"}, {"paperId": "a3008455cdfd1f18139d4357c1b95e24f3e2f272", "title": "Vertical Data Mining from Relational Data and Its Application to COVID-19 Data"}, {"paperId": "52dcb932a00a8db72abbb162ab2c000f6c219b41", "title": "Cross-Feature Transfer Learning for Ef\ufb01cient Tensor Program Generation"}]}
